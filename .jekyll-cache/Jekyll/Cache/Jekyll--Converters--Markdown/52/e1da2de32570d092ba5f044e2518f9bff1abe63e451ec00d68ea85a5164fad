I"­<h2 id="problem">Problem</h2>
<p>When (accidently) creating a SMB share containing an umlaut on FreeNAS, the SMB service will stop working and so will the Active Directory Service.
Every attempt to fix this via the FreeNAS UI will fail, itâ€™s not possible to remove the wrongly-named share there.</p>

<h2 id="solution">Solution</h2>
<p>Remove the share in the FreeNAS SQLite database:</p>

<ol>
  <li>Open database:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sqlite3 /data/freenas-v1.db
</code></pre></div>    </div>
  </li>
  <li>Find Share ID:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="k">*</span> from sharing_cifs_share<span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li>Delete Share:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>delete from sharing_cifs_share where <span class="nb">id</span><span class="o">=</span>&lt;<span class="nv">$SHARE_ID</span><span class="o">&gt;</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
</ol>

<hr />
:ET