I"‚<h2 id="ssl-certificates">SSL Certificates</h2>
<p>See <a href="/ssl-certificates"><em>here</em></a>.</p>

<h2 id="configuration">Configuration</h2>
<ol>
  <li>Edit <code class="highlighter-rouge">/etc/nginx/sites-available/&lt;$DOMAIN&gt;</code>:
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>server {
  listen 80;
  server_name &lt;$DOMAIN&gt; www.&lt;$DOMAIN&gt;;
  rewrite ^ https://$host$request_uri? permanent;
}
   
server {
  listen 443;
  server_name &lt;$DOMAIN&gt; www.&lt;$DOMAIN&gt;;
     
  ssl on;
  ssl_certificate /etc/ssl/certs/&lt;$DOMAIN&gt;.pem;
  ssl_certificate_key /etc/ssl/private/&lt;$DOMAIN&gt;.key;
  ssl_protocols TLSv1 TLSv1.1 TLSv1.2; 
  ssl_prefer_server_ciphers on;
  ssl_ciphers "EECDH+AESGCM EDH+AESGCM EECDH -RC4 EDH -CAMELLIA -SEED !aNULL !eNULL !LOW !3DES !MD5 !EXP !PSK !SRP !DSS !RC4";
  ssl_session_cache shared:SSL:10m;
  ssl_session_timeout 10m;
     
  add_header Strict-Transport-Security max-age=15768000;
     
  root /var/www/&lt;$DOMAIN&gt;/;
}
</code></pre></div>    </div>
  </li>
  <li>Enable virtual host:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">ln</span> <span class="nt">-s</span> /etc/nginx/sites-available/&lt;<span class="nv">$DOMAIN</span><span class="o">&gt;</span> /etc/nginx/sites-enabled/
service nginx restart
</code></pre></div>    </div>
  </li>
</ol>

<h2 id="ssl-server-test">SSL Server Test</h2>
<p>Use the <a href="https://www.ssllabs.com/ssltest/">Qualys SSL Server Test</a> to determine the security rating of this configuration.</p>

<p><img src="/files/nginx-virtual-hosts-ssl/ssllabs.png" alt="ssllabs" /></p>

<hr />
<ol>
  <li><a href="http://www.kuketz-blog.de/nsa-abhoersichere-ssl-verschluesselung-fuer-apache-und-nginx">http://www.kuketz-blog.de/nsa-abhoersichere-ssl-verschluesselung-fuer-apache-und-nginx</a></li>
</ol>
:ET