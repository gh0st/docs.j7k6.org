I"Œ<ol>
  <li>Create <code class="highlighter-rouge">ssh_wrapper.exp</code>:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/usr/bin/expect -f</span>

<span class="nb">eval </span>spawn <span class="o">[</span>lrange <span class="nv">$argv</span> 1 end]
expect <span class="s2">"*?assword:*"</span>
send <span class="o">[</span>lindex <span class="nv">$argv</span> 0]
send <span class="s2">"</span><span class="se">\r</span><span class="s2">"</span>
interact
</code></pre></div>    </div>
  </li>
  <li>Run <code class="highlighter-rouge">chmod +x ssh_wrapper.exp</code></li>
  <li>Run SSH command with wrapper script:
    <ul>
      <li><strong>SSH</strong>:
        <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./ssh_wrapper &lt;$SSH_PASSWORD&gt; ssh -t -o StrictHostKeyChecking=no &lt;$SSH_USER&gt;@&lt;$SSH_HOST&gt; &lt;$COMMAND&gt;
</code></pre></div>        </div>
      </li>
      <li><strong>SCP</strong>:
        <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./ssh_wrapper &lt;$SSH_PASSWORD&gt; scp -r &lt;$LOCAL_DIR&gt;/. &lt;$SSH_USER&gt;@&lt;$SSH_HOST&gt;:&lt;$REMOTE_DIR&gt;/
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ol>

<hr />
<ol>
  <li><a href="http://stackoverflow.com/a/28293101">http://stackoverflow.com/a/28293101</a></li>
</ol>
:ET