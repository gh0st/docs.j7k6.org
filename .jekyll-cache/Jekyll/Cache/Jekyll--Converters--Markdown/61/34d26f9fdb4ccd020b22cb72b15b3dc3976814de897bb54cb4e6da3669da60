I"><p><em>Sparkpost</em> decided to <a href="https://www.sparkpost.com/blog/tls-v1-0-deprecation/"><strong>deprecate <em>TLS v1.0</em> support</strong></a> on their SMTP services in July 2018.
This change led to an unspecified error when trying to send mails with older Debian/Ubuntu versions of <code class="highlighter-rouge">ssmtp</code> (which appearantly doesn’t support <em>TLS v1.1</em>):</p>
<blockquote>
  <p><em>ssmtp: Cannot open smtp.sparkpostmail.com:587</em></p>
</blockquote>

<p>The debug-log showed that the connection was closed after the <code class="highlighter-rouge">STARTTLS</code> command, just saying</p>
<blockquote>
  <p><em>220 2.0.0 continue</em></p>
</blockquote>

<p>I found out that only compiling <code class="highlighter-rouge">ssmtp</code> from source helped to make it work with <em>Sparkpost</em>’s new transport encryption policy:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-fsSL</span> http://http.debian.net/debian/pool/main/s/ssmtp/ssmtp_2.64.orig.tar.bz2 | <span class="nb">tar </span>jxvf -
<span class="nb">cd </span>ssmtp-2.64
./configure <span class="nt">--prefix</span><span class="o">=</span>/
make <span class="o">&amp;&amp;</span> <span class="nb">cp</span> ./ssmtp /usr/sbin/
</code></pre></div></div>

<hr />
:ET