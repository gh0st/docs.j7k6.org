I"ö<p>This command updates an attribute if it already exists and inserts a new attribute if it doesnâ€™t exist, so there will not be any duplicates:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>xmlstarlet edit <span class="nt">--inplace</span> <span class="se">\</span>
  <span class="nt">--update</span> <span class="s2">"/&lt;</span><span class="nv">$ELEMENT_SELECTOR</span><span class="s2">&gt;/@&lt;</span><span class="nv">$ATTR_KEY</span><span class="s2">&gt;"</span> <span class="nt">--value</span> <span class="s2">"&lt;</span><span class="nv">$ATTR_VALUE</span><span class="s2">&gt;"</span> <span class="se">\</span>
  <span class="nt">--insert</span> <span class="s2">"/&lt;</span><span class="nv">$ELEMENT_SELECTOR</span><span class="s2">&gt;/[not(@&lt;</span><span class="nv">$ATTR_KEY</span><span class="s2">&gt;)]"</span> <span class="nt">--type</span> attr <span class="nt">-n</span> &lt;<span class="nv">$ATTR_KEY</span><span class="o">&gt;</span> <span class="nt">--value</span> <span class="s2">"&lt;</span><span class="nv">$ATTR_VALUE</span><span class="s2">&gt;"</span> <span class="se">\</span>
  &lt;<span class="nv">$XML_FILE</span><span class="o">&gt;</span>
</code></pre></div></div>

<hr />
:ET